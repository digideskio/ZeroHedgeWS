(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;$.Define($$,{ZeroHedgeWS:{Client:{Ajax:function(A,B,C){var D;D=function(E){var F,G,H;F=E[0];G=E[1];E[2];H=a.ajax({url:B,type:A,contentType:"application/json",dataType:"text",data:C,success:function(I){return F(I);},error:function(J){return G(b.New1(J.responseText));}});return;};return c.FromContinuations(D);},GetPageArticles:function(K){return c.Delay(function(){var M;M="/api/page/"+$$.String(K);return c.Bind(e.Ajax("GET",M,null),function(N){var O;O=g.get_Default();return c.Return(((O.DecodeList(O.DecodeRecord(undefined,[["Title",h,0],["Introduction",h,0],["Body",h,0],["Reference",h,0],["Published",h,0],["Updated",O.DecodeDateTime(),0]])))())(i.parse(N)));});});},Main:function(P){var Q,R,S,T,U,_2,_3,_8,_9;Q=l.Create("id","blogItems");R=m.Class("col-md-12");S=n.append([Q],o.ofArray([R]));T=e["v'page"]();p.Set(T,P);U=c.Delay(function(){var W;W=e.GetPageArticles(p.Get(e["v'page"]()));return c.Bind(W,function(X){var Y;Y=function(Z){var _0,_1;_0=Z.Title;q?q.log(_0):undefined;_1=Z.Reference;q?q.log(_1):undefined;return e.postList().Add(Z);};n.iter(Y,X);return c.Return(null);});});c.Start(U,{$:0});_2=o.ofArray([l.Create("class","container top-padding-med ng-scope")]);_3=function(){var _5,_7;_5=function(_6){return e.doc(_6);};_7=s.View(e.postList());return r.Convert(_5,_7);};_8=e["v'blog"]();_9=t.Map(_3,_8);return r.Element("div",_2,o.ofArray([r.Element("div",S,o.ofArray([r.EmbedView(_9)]))]));},doc:function(_){return r.Element("div",o.ofArray([m.Class("panel panel-primary")]),o.ofArray([e["doc'header"](_),e["doc'body"](_)]));},"doc'body":function(ba){var bb,bc,bd,be,bf,bg,bh,bi,bj;bb=l.Create("class","container");bc=m.Style("margin-top","100px");bd=n.append([bb],o.ofArray([bc]));be=l.Create("placeholder","Title");bf=m.Class("form-control");bg=n.append([be],o.ofArray([bf]));bi=ba.Introduction;bh=a(u.toSafe("<div>")+u.toSafe(bi)+u.toSafe("</div>")).get(0);bj=o.ofArray([r.TextNode(ba.Published)]);return r.Element("div",o.ofArray([m.Class("panel-body")]),o.ofArray([r.Static(bh),r.Element("p",[],bj)]));},"doc'header":function(bj){var bk,bl,bm,bn,bo,bp,bq;bk=bj.Title;q?q.log(bk):undefined;bm=bj.Title;bl=a(u.toSafe("<div>")+u.toSafe(bm)+u.toSafe("</div>")).get(0);bn=bj.Reference;bo=u.toSafe("/story/")+u.toSafe(bn);bp=l.Create("href",bo);bq=o.ofArray([bp]);return r.Element("div",o.ofArray([m.Class("panel-heading")]),o.ofArray([r.Element("a",bq,o.ofArray([r.Static(bl)]))]));},postList:$.Field(function(){var br,bt;br=function(bs){return $$.String(bs.Reference);};bt=$.New(v,{$:0});return w.Create(br,bt);}),"v'blog":$.Field(function(){var bu,bx;bu=function(){return c.Delay(function(){return c.Return(e.postList());});};t.get_Do();bx=x.Const(1);return t.MapAsync(bu,bx);}),"v'page":$.Field(function(){return y.Create(1);})},StoryClient:{Ajax:function(by,bz,bA){var bB;bB=function(bC){var bD,bE,bF;bD=bC[0];bE=bC[1];bC[2];bF=a.ajax({url:bz,type:by,contentType:"application/json",dataType:"text",data:bA,success:function(bG){return bD(bG);},error:function(bH){return bE(b.New1(bH.responseText));}});return;};return c.FromContinuations(bB);},GetStory:function(bI){return c.Delay(function(){var bK;bK="/api/story/"+u.toSafe(bI);return c.Bind(z.Ajax("GET",bK,null),function(bL){if(q){q.log("Get zerohedge story");}g.get_Default();return c.Return((h())(i.parse(bL)));});});},Main:function(bM){var bN,bO,bP,bQ,bR,bS,bT;bN=l.Create("id","blogItems");bO=m.Class("col-md-12");bP=n.append([bN],o.ofArray([bO]));bQ="";bR="";bS="";bT=y.Create(bQ);c.Start(c.Delay(function(){return c.Bind(z.GetStory(bM),function(bV){var bW;a("#bodyid").children().remove();bW=a(u.toSafe("<div>")+u.toSafe(bV)+u.toSafe("</div>")).get(0);a("#bodyid").append(bW);if(q){q.log(bV);}return c.Return(null);});}),{$:0});return r.Element("div",o.ofArray([l.Create("class","container top-padding-med ng-scope")]),o.ofArray([r.Element("div",o.ofArray([l.Create("id","bodyid")]),o.ofArray([r.TextNode("")]))]));},doc:function(bX){return r.Element("div",o.ofArray([m.Class("panel panel-primary")]),o.ofArray([z["doc'header"](bX),z["doc'body"](bX)]));},"doc'body":function(bY){var bZ,b0,b1,b2,b3,b4,b5,b6,b7;bZ=l.Create("class","container");b0=m.Style("margin-top","100px");b1=n.append([bZ],o.ofArray([b0]));b2=l.Create("placeholder","Title");b3=m.Class("form-control");b4=n.append([b2],o.ofArray([b3]));b6=bY.Introduction;b5=a(u.toSafe("<div>")+u.toSafe(b6)+u.toSafe("</div>")).get(0);b7=o.ofArray([r.TextNode(bY.Published)]);return r.Element("div",o.ofArray([m.Class("panel-body")]),o.ofArray([r.Static(b5),r.Element("p",[],b7)]));},"doc'header":function(b8){var b9,b_,b$,ca,cb,cc,cd;b9=b8.Title;q?q.log(b9):undefined;b$=b8.Title;b_=a(u.toSafe("<div>")+u.toSafe(b$)+u.toSafe("</div>")).get(0);ca=b8.Reference;cb=u.toSafe("/story?ref=")+u.toSafe(ca);cc=l.Create("href",cb);cd=o.ofArray([cc]);return r.Element("div",o.ofArray([m.Class("panel-heading")]),o.ofArray([r.Element("a",cd,o.ofArray([r.Static(b_)]))]));}}}});$.OnInit(function(){a=$.Safe($$.jQuery);b=$.Safe($$.WebSharper.Exception);c=$.Safe($$.WebSharper.Concurrency);d=$.Safe($$.ZeroHedgeWS);e=$.Safe(d.Client);f=$.Safe($$.WebSharper.Json);g=$.Safe(f.Provider);h=$.Safe(g.Id);i=$.Safe($$.JSON);j=$.Safe($$.WebSharper.UI);k=$.Safe(j.Next);l=$.Safe(k.AttrProxy);m=$.Safe(k.AttrModule);n=$.Safe($$.WebSharper.Seq);o=$.Safe($$.WebSharper.List);p=$.Safe(k.Var1);q=$.Safe($$.console);r=$.Safe(k.Doc);s=$.Safe(k.ListModel1);t=$.Safe(k.View);u=$.Safe($$.WebSharper.PrintfHelpers);v=$.Safe(o.T);w=$.Safe(k.ListModel);x=$.Safe(k.View1);y=$.Safe(k.Var);return z=$.Safe(d.StoryClient);});$.OnLoad(function(){e["v'page"]();e["v'blog"]();e.postList();return;});}());
