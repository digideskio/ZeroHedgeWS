(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;$.Define($$,{ZeroHedgeWS:{Client:{Ajax:function(z,A,B){var C;C=function(D){var E,F,G;E=D[0];F=D[1];D[2];G=a.ajax({url:A,type:z,contentType:"application/json",dataType:"text",data:B,success:function(H){return E(H);},error:function(I){return F(b.New1(I.responseText));}});return;};return c.FromContinuations(C);},GetPageArticles:function(J){return c.Delay(function(){var L;L="./api/page/"+$$.String(J);return c.Bind(e.Ajax("GET",L,null),function(M){var N;N=g.get_Default();return c.Return(((N.DecodeList(N.DecodeRecord(undefined,[["Title",h,0],["Introduction",h,0],["Body",h,0],["Reference",h,0],["Published",h,0],["Updated",N.DecodeDateTime(),0]])))())(i.parse(M)));});});},Main:function(O){var P,Q,R,S,T,U,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,bd,be;P=l.Create("id","blogItems");Q=m.Style("margin-top","55px");R=m.Class("col-md-12");S=n.append([P,Q],o.ofArray([R]));T=e["v'page"]();p.Set(T,O);U=c.Delay(function(){return c.Bind(e.GetPageArticles(p.Get(e["v'page"]())),function(W){var X;X=function(Y){return e.postList().Add(Y);};n.iter(X,W);return c.Return(null);});});c.Start(U,{$:0});Z=l.Create("role","navigation");_0=l.Create("class","navbar navbar-inverse navbar-fixed-top");_1=n.append([Z],o.ofArray([_0]));_2=l.Create("class","container");_3=m.Style("margin-top","100px");_4=n.append([_2],o.ofArray([_3]));_5=l.Create("class","container");_6=m.Style("margin-top","100px");_7=n.append([_5],o.ofArray([_6]));_8=o.ofArray([l.Create("class","container top-padding-med ng-scope")]);_9=function(){var ba,bc;ba=function(bb){return e.doc(bb);};bc=r.View(e.postList());return q.Convert(ba,bc);};bd=e["v'blog"]();be=s.Map(_9,bd);return q.Element("div",_8,o.ofArray([q.Element("div",S,o.ofArray([q.EmbedView(be)]))]));},doc:function(be){return q.Element("div",o.ofArray([m.Class("panel panel-primary")]),o.ofArray([e["doc'header"](be),e["doc'body"](be)]));},"doc'body":function(bf){var bg,bh,bi,bj,bk,bl;bg=l.Create("placeholder","Title");bh=m.Class("form-control");bi=n.append([bg],o.ofArray([bh]));bk=bf.Introduction;bj=a(t.toSafe("<div>")+t.toSafe(bk)+t.toSafe("</div>")).get(0);bl=o.ofArray([q.TextNode(bf.Published)]);return q.Element("div",o.ofArray([m.Class("panel-body")]),o.ofArray([q.Static(bj),q.Element("p",[],bl)]));},"doc'header":function(bm){var bn,bo,bp,bq,br,bs;bo=bm.Title;bn=a(t.toSafe("<div>")+t.toSafe(bo)+t.toSafe("</div>")).get(0);bp=bm.Reference;bq=t.toSafe("./story/")+t.toSafe(bp);br=l.Create("href",bq);bs=o.ofArray([br]);return q.Element("div",o.ofArray([m.Class("panel-heading")]),o.ofArray([q.Element("h3",o.ofArray([l.Create("class","panel-title")]),o.ofArray([q.Element("a",bs,o.ofArray([q.Static(bn)]))]))]));},postList:$.Field(function(){var bt,bv;bt=function(bu){return $$.String(bu.Reference);};bv=$.New(u,{$:0});return v.Create(bt,bv);}),"v'blog":$.Field(function(){var bw,bz;bw=function(){return c.Delay(function(){return c.Return(e.postList());});};s.get_Do();bz=w.Const(1);return s.MapAsync(bw,bz);}),"v'page":$.Field(function(){return x.Create(1);})},StoryClient:{Ajax:function(bA,bB,bC){var bD;bD=function(bE){var bF,bG,bH;bF=bE[0];bG=bE[1];bE[2];bH=a.ajax({url:bB,type:bA,contentType:"application/json",dataType:"text",data:bC,success:function(bI){return bF(bI);},error:function(bJ){return bG(b.New1(bJ.responseText));}});return;};return c.FromContinuations(bD);},GetStory:function(bK){return c.Delay(function(){var bM;bM="./api/story/"+t.toSafe(bK);return c.Bind(y.Ajax("GET",bM,null),function(bN){g.get_Default();return c.Return((h())(i.parse(bN)));});});},Main:function(bO){var bP,bQ,bR,bS,bT,bU,bV;bP=l.Create("id","blogItems");bQ=m.Class("col-md-12");bR=n.append([bP],o.ofArray([bQ]));bS="";bT="";bU="";bV=x.Create(bS);c.Start(c.Delay(function(){return c.Bind(y.GetStory(bO),function(bX){var bY;a("#bodyid").children().remove();bY=a(t.toSafe("<div>")+t.toSafe(bX)+t.toSafe("</div>")).get(0);a("#bodyid").append(bY);return c.Return(null);});}),{$:0});return q.Element("div",o.ofArray([l.Create("class","container top-padding-med ng-scope")]),o.ofArray([q.Element("div",o.ofArray([l.Create("id","bodyid")]),o.ofArray([q.TextNode("")]))]));},doc:function(bZ){return q.Element("div",o.ofArray([m.Class("panel panel-primary")]),o.ofArray([y["doc'header"](bZ),y["doc'body"](bZ)]));},"doc'body":function(b0){var b1,b2,b3,b4,b5,b6,b7,b8,b9;b1=l.Create("class","container");b2=m.Style("margin-top","100px");b3=n.append([b1],o.ofArray([b2]));b4=l.Create("placeholder","Title");b5=m.Class("form-control");b6=n.append([b4],o.ofArray([b5]));b8=b0.Introduction;b7=a(t.toSafe("<div>")+t.toSafe(b8)+t.toSafe("</div>")).get(0);b9=o.ofArray([q.TextNode(b0.Published)]);return q.Element("div",o.ofArray([m.Class("panel-body")]),o.ofArray([q.Static(b7),q.Element("p",[],b9)]));},"doc'header":function(b_){var b$,ca,cb,cc,cd,ce;ca=b_.Title;b$=a(t.toSafe("<div>")+t.toSafe(ca)+t.toSafe("</div>")).get(0);cb=b_.Reference;cc=t.toSafe("/story?ref=")+t.toSafe(cb);cd=l.Create("href",cc);ce=o.ofArray([cd]);return q.Element("div",o.ofArray([m.Class("panel-heading")]),o.ofArray([q.Element("a",ce,o.ofArray([q.Static(b$)]))]));}}}});$.OnInit(function(){a=$.Safe($$.jQuery);b=$.Safe($$.WebSharper.Exception);c=$.Safe($$.WebSharper.Concurrency);d=$.Safe($$.ZeroHedgeWS);e=$.Safe(d.Client);f=$.Safe($$.WebSharper.Json);g=$.Safe(f.Provider);h=$.Safe(g.Id);i=$.Safe($$.JSON);j=$.Safe($$.WebSharper.UI);k=$.Safe(j.Next);l=$.Safe(k.AttrProxy);m=$.Safe(k.AttrModule);n=$.Safe($$.WebSharper.Seq);o=$.Safe($$.WebSharper.List);p=$.Safe(k.Var1);q=$.Safe(k.Doc);r=$.Safe(k.ListModel1);s=$.Safe(k.View);t=$.Safe($$.WebSharper.PrintfHelpers);u=$.Safe(o.T);v=$.Safe(k.ListModel);w=$.Safe(k.View1);x=$.Safe(k.Var);return y=$.Safe(d.StoryClient);});$.OnLoad(function(){e["v'page"]();e["v'blog"]();e.postList();return;});}());
